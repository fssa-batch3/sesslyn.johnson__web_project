<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Product Details page</title>
    <link rel="stylesheet" href="../../assets/css/seller/product_details.css">
    <link rel="stylesheet" href="../../assets/css/seller/homepage.css">
    <link rel="stylesheet" href="../../assets/css/normalize.css">
    <link rel="stylesheet" href="../../assets/css/header and footer.css">

    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700," rel="stylesheet" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
</head>

<body id="product-main">
    <header class="header" id="header-nav">
        <div>
            <a href="./Homepage.html">
                <img class="logo-image" src="../../assets/images/Main/casas-logo.png" alt="logo image" />
            </a>
        </div>
        <div class="inner" id="input">
            <button type="submit"><a href="./Register-seller.html">Login</a></button>
        </div>
        <div class="triple-bar" id="profile-icon">
            <a href="profile-seller.html"><img src="../../assets/images/Main/profile (1).png" alt="bar icon" /></a>
        </div>
        <div class="plus-icon">
            <a href="new-product.html"><i class="fa fa-plus"></i></a>
        </div>
    </header>


    <div class="contain">
       
    </div>
    <script>

        let div_top
        let div_container
        let a_tag
        let img_product
        let img_delete
        let h2_title
        let p_paragraph
        let button_primary
        let button_secondary

        let details = {
            description: [
                {
                    product_image: {
                        source: "../../assets/images/Rooms/Sofa/Sofa/Sofa 3.png",
                        alt: "main_image"
                    },
                    title: "Munich Scarlet Sofa",
                    tag: "./Product-uploaded .html",
                    price: {
                        type: "₹",
                        value: 25000
                    },
                    delete_image: {
                        source: "../../assets/images/Main/delete_icon.png",
                        alt: "delete_image"
                    }
                },
                {
                    product_image: {
                        source: "../../assets/images/Rooms/Wallpaper/Wallpaper 3.jpg",
                        alt: "main_image"
                    },
                    title: "Royal Blue Wallpaper",
                    tag: "./Product-uploaded .html",
                    price: {
                        type: "₹",
                        value: 5000
                    },
                    delete_image: {
                        source: "../../assets/images/Main/delete_icon.png",
                        alt: "delete_image"
                    }
                },
                {
                    product_image: {
                        source: "../../assets/images/Chamber/Chandelier/Chandelier 12.jpg",
                        alt: "main_image"
                    },
                    title: "Crystal White Chandelier",
                    tag: "./Product-uploaded .html",
                    price: {
                        type: "₹",
                        value: 8000
                    },
                    delete_image: {
                        source: "../../assets/images/Main/delete_icon.png",
                        alt: "delete_image"
                    }
                },
                {
                    product_image: {
                        source: "../../assets/images/Chamber/Crockery/crockery 6.jpg",
                        alt: "main_image"
                    },
                    title: "White Crockery Sets",
                    tag: "./Product-uploaded .html",
                    price: {
                        type: "₹",
                        value: 12000
                    },
                    delete_image: {
                        source: "../../assets/images/Main/delete_icon.png",
                        alt: "delete_image"
                    }
                }

            ],

        }


        let product_upload = JSON.parse(localStorage.getItem("product_crud"));


        //  <div class="down">
        div_top = document.createElement("div");
        div_top.setAttribute("class", "top_container");
        console.log(div_top)

        
        let added_products = [];
        for (let j = 0; j < product_upload.length; j++) {

            //  <div class="down">
            div_container = document.createElement("div");
            div_container.setAttribute("class", "container");
            div_container.setAttribute("data-id", product_upload[j]["product_uuid"])
            div_top.append(div_container);


            //<img/>
            img_product = document.createElement("img");
            img_product.setAttribute("alt", product_upload[j]["product_name"] + " image");
            img_product.setAttribute("class", "main_image");
            img_product.setAttribute("src", product_upload[j]["image_url"]);
            img_product.setAttribute("data-id", product_upload[j]["product_uuid"]);

          let  img_id = img_product.getAttribute('data-id');
            img_product.addEventListener("click", (event) => {
                const product_description = img_id;
                window.location.href = `./Product-uploaded .html?product_id=${product_description}`;
            })


            div_container.append(img_product);

            //<img/>
            img_delete = document.createElement("img");
            img_delete.setAttribute("alt", "delete_icon");
            img_delete.setAttribute("class", "delete_icon");
            img_delete.setAttribute("src", "../../assets/images/Main/delete_icon.png");
            div_container.append(img_delete);


            //<h2></h2>
            h2_title = document.createElement("h2");
            h2_title.innerHTML = product_upload[j]["product_name"];
            div_container.append(h2_title);

            //<p class="price"></p>
            p_paragraph = document.createElement("p");
            p_paragraph.innerHTML = product_upload[j]["product_sell"];
            div_container.append(p_paragraph);

            //<button class="btn"></button>
            button_primary = document.createElement("button");
            button_primary.setAttribute("class", "button_add");
            button_primary.setAttribute("data-id", product_upload[j]["product_uuid"]);
            button_primary.innerHTML = "Add";

         let  button_id = button_primary.getAttribute('data-id')
            button_primary.addEventListener("click", (event) => {  
            console.log(button_id);
              if(!added_products.includes(button_id)){
                added_products.push(button_id);
              } else {
                alert("Already Added");
              }
            localStorage.setItem('added_products', JSON.stringify(added_products));
            })

            div_container.append(button_primary);
        
            //<button class="btn"></button>
            button_secondary = document.createElement("button");
            button_secondary.setAttribute("class", "button_remove");
            button_secondary.setAttribute("data-id", product_upload[j]["product_uuid"]);
            button_secondary.innerHTML = "Remove";

          let  delete_id = button_secondary.getAttribute('data-id');
            button_secondary.addEventListener("click", (event) => {
                if(added_products.includes(delete_id)){
                    const indexOfUser = added_products.indexOf(delete_id);
                    added_products.splice(indexOfUser, 1);
                }
                else{
                    alert("Product have not been added");
                }
                localStorage.setItem('added_products', JSON.stringify(added_products));
            })

            div_container.append(button_secondary);

        }

        document.querySelector("div.contain").append(div_top);

      
            
    </script>

</body>

</html>