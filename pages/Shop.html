<!DOCTYPE html>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="UTF-8">
<title>Shop</title>
<link rel="stylesheet" href="../assets/css/shop.css">
<link rel="stylesheet" href="../assets/css/normalize.css">
<link rel="stylesheet" href="../assets/css/header and footer.css">
<link rel="dns-prefetch" href="//fonts.googleapis.com" />
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700," rel="stylesheet" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<body>

   <div class="search-div">
      <input type="search" placeholder="Search" class="search" />
      <main class="main">
         <img src="../search-outline.svg" class="search-icon" width="35px" height="20px" alt="search icon" />



      </main>
   </div>

   <div class="top">
      <div class="left">
         <a href="./Chandelier/Page.html"><img src="../assets/images/Main/chandelier-main.jfif" width="600px"
               height="500px" alt="chandleir image" class="images5" /></a>
      </div>
      <div class="right">
         <h1><span class="color">D</span>ecor comes alive</h1>
         <p class="right-para">Check out our newly launched <br>decor section</p>
         <a href="../pages/Chandelier/Main Page.html"><button class="btn">Explore Now</button></a>
      </div>
   </div>

   <div class="categories" id="category">
      <div class="categories-heading">
         <h1 id="h1"><span class="color">E</span>xplore Our <span class="color">C</span>ategories</h1>
      </div>
      <div class="categories-img">
         <div>
            <a href="./Living room/project.html"><img
                  src="../assets/images/Rooms/Living room/living room rich/living space 4.png"
                  alt="chandleir image" /></a>
            <p>Living Room</p>
         </div>
         <div>
            <a href="./Kids area/Main Page.html"><img class="kids" src="../assets/images/Chamber/kids/kids area 2.jpg"
                  alt="chandleir image" /></a>
            <p>Kids Area</p>
         </div>
         <div id="shop-3">
            <a href="./Crockery Units/Main Page.html"><img class="crockery"
                  src="../assets/images/Chamber/Crockery/crockery 8.jpg" alt="chandleir image" /></a>
            <p>Crockery Units</p>
         </div>
         <div>
            <a href="./Wadrobe/Main Page.html"><img class="wadrobe" src="../assets/images/Rooms/wadrobe/wadrobe 5.jpg"
                  alt="chandleir image" /></a>
            <p>Wadrobe</p>
         </div>
         <div>
            <a href="./False Ceiling/Main Page.html"><img class="ceiling"
                  src="../assets/images/Chamber/ceiling/False ceiling 12.jpg" alt="chandleir image" /></a>
            <p>False Ceiling</p>
         </div>
         <div id="shop-3">
            <a href="./Chandelier/Main Page.html"><img class="chandelier"
                  src="../assets/images/Chamber/Chandelier/Chandelier 11.jpg" alt="chandleir image" /></a>
            <p>Chandelier</p>
         </div>
      </div>
   </div>
   <div id="looped-div"></div>

   <div class="shopping" id="sofas_upload">

      <div class="shopping-heading">
         <h1><span class="color">S</span>ofas For <span class="color">S</span>hopping</h1>
      </div>
      <div class="shopping-img" id="shop_sofa">

      </div>
   </div>

   <div class="categories">
      <div class="categories-heading">
         <h1><span class="color">M</span>odular <span class="color">T</span>V units with <span
               class="color">S</span>helves</h1>
      </div>
      <div class="categories-img" id="shop_tv">

      </div>

      <div class="shopping">
         <div class="shopping-heading">
            <h1><span class="color">S</span>pace Saving <span class="color">F</span>urniture</h1>
         </div>
         <div class="shopping-img" id="reusable_shop">

         </div>
      </div>


      <div class="categories">
         <div class="categories-heading">
            <h1><span class="color">W</span>insome <span class="color">W</span>allpaper</h1>
         </div>
         <div class="categories-img" id="wallpaper_shop">

         </div>

         <div class="shopping">
            <div class="shopping-heading">
               <h1><span class="color">C</span>handelier Lights to brighten your <span class="color">L</span>ife</h1>
            </div>
            <div class="shopping-img" id="chandelier_shop">

            </div>
         </div>


         <div class="categories">
            <div class="categories-heading">
               <h1><span class="color">W</span>arming <span class="color">W</span>adrobe</h1>
            </div>
            <div class="categories-img" id="wadrobe_shop">

            </div>


            <div class="shopping">
               <div class="shopping-heading">
                  <h1><span class="color">C</span>lassy Crockery<span class="color"> U</span>nits</h1>
               </div>
               <div class="shopping-img" id="crockery_shop">


               </div>
            </div>


            <div class="top-main">
               <div class="top-left">
                  <a href="./Living room/project.html"><img id=" top-left"
                        src="../assets/images/Rooms/Living room/living room rich/living space 4.png" width="700px"
                        height="400px" alt="chandleir image" /></a>
               </div>
               <div class="top-right">
                  <p class="top-right-para"><span class="color">S</span>ee beauty in<br><b>new light</b></p>
                  <a href="./Living room/design.html"><button class="btn-tertitary">EXPLORE OUR RANGE OF LIGHT
                        FIXUTRES</button></a>
               </div>
            </div>

            <div class="footer" id="footer-shop">
               <div class="footer-div" id="living-footer">
                  <img class="footer-img" src="../assets/images/Main/casas-logo.png" alt="desktop image" />

                  <div class="footer-media">
                     <a href="https://www.facebook.com/profile.php?id=100087049213851"><img
                           src="../assets/images/Main/facebook-icon.png" alt="facebook-icon" /></a>
                     <a href="https://github.com/Sesslyn041215"><img src="../assets/images/Main/github-new.png"
                           alt="github-icon" /></a>
                     <a href="https://www.linkedin.com/in/sesslyn-j-989b18250"><img
                           src="../assets/images/Main/linked-icon.png" alt="linked-icon" /></a>
                     <a href="https://twitter.com/SesslynJ"><img src="../assets/images/Main/twitter-icon.png"
                           alt="twitter-icon" /></a>
                  </div>
               </div>

               <div class="footer-div" id="footer-2">
                  <h4>General</h4>
                  <a href="../pages/Login/Register.html">
                     <p>Sign Up</p>
                  </a>
                  <a href="../pages/queries.html">
                     <p>About</p>
                  </a>
                  <a href="https://medium.com/@sesslyn2004">
                     <p>Blog</p>
                  </a>
                  <a href="https://medium.com/@mohid-ahmed/ghow-to-stay-focused-when-working-from-home-b54c7ab39e96">
                     <p>Careers</p>
                  </a>
                  <a
                     href="https://medium.com/hackernoon/11-things-developers-love-hearing-from-non-developer-co-workers-ea94805cf05d">
                     <p>Developers</p>
                  </a>
               </div>

               <div class="footer-div" id="footer-3">
                  <h4>Browse Casas</h4>
                  <a href="../index.html">
                     <p>Main page</p>
                  </a>
                  <a href="../pages/Living room/project.html">
                     <p>Chamber</p>
                  </a>
                  <a href="../pages/queries.html">
                     <p>About</p>
                  </a>
                  <a href="../pages/Shop.html">
                     <p>Shop</p>
                  </a>
                  <a href="../pages/liked.html">
                     <p>Wishlist</p>
                  </a>
                  <a href="../pages/order.html">
                     <p>Orders</p>
                  </a>
               </div>

               <div class="footer-div" id="footer-3">
                  <h4>Business Solutions</h4>
                  <a href="./Login/Register.html">
                     <p>Talent</p>
                  </a>
                  <a href="">
                     <p>Marketing</p>
                  </a>
                  <a href="#">
                     <p>Sales</p>
                  </a>
                  <a href="#">
                     <p>Learning</p>
                  </a>
                  <a href="#">
                     <p>Creativity</p>
                  </a>
               </div>

            </div>

            <script>

               let product_crud = JSON.parse(localStorage.getItem("product_crud"));
               let added_products = JSON.parse(localStorage.getItem("added_products"));


               //sofa
               let sofa = product_crud.filter(function (e) {
                  return e.product_category == 'Sofa';
               });
               console.log(sofa)

               for (const product_details of sofa) {
                  const template1 = product_upload(product_details);
                  document.querySelector("#shop_sofa").insertAdjacentHTML("beforeend", template1);
               }

               function product_upload(sofa) {
                  const template1 =
                     `
                           <div class="cart_div">
                              <img id="shopping-img"  src="${sofa["image_url"]}" class="details" data-id="${sofa["product_uuid"]}" alt="Sofa image"/>
                              <p class="price_para">${"Rs." + sofa["product_sell"]}</p>
                              <button data-cart=${sofa["product_uuid"]} onclick=" function already()" class="cart_button" id="btn-primary">Add to Cart</button>
                           </div>
                     `
                  return template1;
               }

               //tv units
               let tv_sets = product_crud.filter(function (e) {
                  return e.product_category == 'TV Units';
               });


               for (const product_tv of tv_sets) {
                  const template2 = product_units(product_tv);
                  document.querySelector("#shop_tv").insertAdjacentHTML("beforeend", template2);

               }

               function product_units(tv_sets) {
                  const template2 =
                     ` <div class="cart_div">
                       <img src="${tv_sets["image_url"]}" class="details" data-id="${tv_sets["product_uuid"]}" alt="chandleir image" />
                      <p class="price_para">${"Rs." + tv_sets["product_sell"]}</p>
                     <button data-cart=${tv_sets["product_uuid"]} class="cart_button" id="btn-secondary">Add to Cart</button>
                     </div>
                     `
                  return template2;
               }

               //reusable 
               let space_saving = product_crud.filter(function (e) {
                  return e.product_category == 'Space Saving Furniture';
               });


               for (const product_reuse of space_saving) {
                  const template3 = product_space(product_reuse);
                  document.querySelector("#reusable_shop").insertAdjacentHTML("beforeend", template3);

               }

               function product_space(space_saving) {
                  const template3 =
                     ` 
                     <div class="cart_div">
                    <img  src="${space_saving["image_url"]}" class="details" data-id="${space_saving["product_uuid"]}" alt="chandleir image" />
                     <p class="price_para">${"Rs." + space_saving["product_sell"]}</p>
                    <button data-cart="${space_saving["product_uuid"]}" class="cart_button" id="btn-primary">Add to Cart</button>
                     </div>
                     `
                  return template3;
               }

               //Wallpaper
               let Wallpaper_units = product_crud.filter(function (e) {
                  return e.product_category == 'Wallpaper';
               });

               for (const product_wallpaper of Wallpaper_units) {
                  const template4 = product_wall(product_wallpaper);
                  document.querySelector("#wallpaper_shop").insertAdjacentHTML("beforeend", template4);
               }

               function product_wall(Wallpaper_units) {
                  const template4 =
                     ` 
                      <div class="cart_div">
                      <img src="${Wallpaper_units["image_url"]}" class="details" data-id="${Wallpaper_units["product_uuid"]}" alt="chandleir image" />
                      <p class="price_para">${"Rs." + Wallpaper_units["product_sell"]}</p>
                      <button data-cart="${Wallpaper_units["product_uuid"]}" class="cart_button" id="btn-secondary">Add to Cart</button>
                      </div>
                     `
                  return template4;
               }

               //Chandelier
               let chandelier_units = product_crud.filter(function (e) {
                  return e.product_category == 'Candelier';
               });

               for (const product_chandelier of chandelier_units) {
                  const template4 = product_chand(product_chandelier);
                  document.querySelector("#chandelier_shop").insertAdjacentHTML("beforeend", template4);

               }

               function product_chand(chandelier_units) {
                  const template4 =
                     ` 
                     <div class="cart_div">
                  <img src="${chandelier_units["image_url"]}" class="details" data-id="${chandelier_units["product_uuid"]}" alt="chandleir image" />
                  <p class="price_para">${"Rs." + chandelier_units["product_sell"]}</p>
                 <button data-cart="${chandelier_units["product_uuid"]}" class="cart_button" id="btn-primary">Add to Cart</button>
               </div>

                     `
                  return template4;
               }

               //wadrobe
               let Wadrobe_units = product_crud.filter(function (e) {
                  return e.product_category == 'Wadrobe';
               });

               for (const product_wadrobe of Wadrobe_units) {
                  const template4 = product_wad(product_wadrobe);
                  document.querySelector("#wadrobe_shop").insertAdjacentHTML("beforeend", template4);

               }

               function product_wad(Wadrobe_units) {
                  const template4 =
                     ` 
                    <div class="cart_div">
                    <img id="ceiling" src="${Wadrobe_units["image_url"]}" class="details" data-id="${Wadrobe_units["product_uuid"]}" alt="chandleir image" />
                    <p class="price_para">${"Rs." + Wadrobe_units["product_sell"]}</p>
                   <button data-cart="${Wadrobe_units["product_uuid"]}" class="cart_button" id="btn-secondary">Add to Cart</button>
                    </div>

                     `
                  return template4;
               }

               //Crockery units
               let crockery_units = product_crud.filter(function (e) {
                  return e.product_category == 'Crockery Units';
               });

               for (const product_crockery of crockery_units) {
                  const template4 = product_crock(product_crockery);
                  document.querySelector("#crockery_shop").insertAdjacentHTML("beforeend", template4);

               }

               function product_crock(crockery_units) {
                  const template4 =
                     ` 
                     <div class="cart_div">
                    <img  src="${crockery_units["image_url"]}" class="details" data-id="${crockery_units["product_uuid"]}" alt="chandleir image" />
                     <p class="price_para">${"Rs." + crockery_units["product_sell"]}</p>
                     <a href="./cart-list.html"><button data-cart="${crockery_units["product_uuid"]}" class="cart_button" id="btn-primary">Add to Cart</button></a>

                    </div>
                     `
                  return template4;
               }

               const bookCovers = document.querySelectorAll(".details");
               bookCovers.forEach(bookCover => {
                  bookCover.addEventListener("click", (event) => {
                     const person_data = bookCover.dataset.id;

                     window.location.href = `../pages/description.html?product_id=${person_data}`;
                  })
               })

             

               let addToCart = document.querySelectorAll(".cart_button")
               addToCart.forEach(function (cart) {
                  cart.addEventListener("click", function () {
                     let id_cart = this.dataset.cart

                     let parent = this.closest(".cart_div");
                     // console.log(parent)
                     let product_price = parent.querySelector(".price_para").innerHTML.replace("Rs.", "");
                     console.log(product_price)
                     let cart_list = JSON.parse(localStorage.getItem('cart_list')) || [];
                     let userId = JSON.parse(localStorage.getItem('user_id'));
                    
                     let exist = cart_list.length &&
                        JSON.parse(localStorage.getItem('cart_list')).some(data =>
                           data.product_uuid == id_cart && data.userId === userId
                        );
                        if(!userId){
                           alert("log in")
                           window.location.href="./Login/Register.html";
                           return;
                        }

                     if (!exist) {
                        cart_list.push({
                           "product_uuid": id_cart,
                           "product_price": parseInt(product_price),
                           "userId": userId,
                           "product_quantity": 1

                        });
                        localStorage.setItem('cart_list', JSON.stringify(cart_list));
                        alert('Product Added to the Cart');
                        window.location.href = "../pages/cart-list.html";
                     }

                     else {
                        alert('Sorry the Product already added');
                     }
                  });

               });

            </script>

            <script src="../assets/comments/header.js"></script>
</body>

</html>