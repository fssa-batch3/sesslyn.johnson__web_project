<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Description</title>
	<link rel="stylesheet" href="../assets/css/description.css">
	<link rel="stylesheet" href="../assets/css/normalize.css">
	<link rel="stylesheet" href="../assets/css/header and footer.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>

<body>
	
	<section class="top" id="top_section">

	</section>


	</div>

	<script>


		let product_crud = JSON.parse(localStorage.getItem("product_crud"));
		let added_products = JSON.parse(localStorage.getItem("added_products"));

		const queryString = window.location.search;
		const urlParams = new URLSearchParams(queryString);
		const product_id = urlParams.get('product_id');

		let unique_id = product_crud.find(e => e.product_uuid == product_id);

		console.log(unique_id)
		localStorage.setItem('product', JSON.stringify(unique_id.product_uuid));


		let product_upload = {
			image: [
				{
					source: "../assets/images/Rooms/Sofa/Sofa/Sofa 5.jpg",
					alt: "Bluish Green Fabric Sofa"
				},
				{
					source: "../assets/images/Rooms/Sofa/Sofa/Sofa 3.png",
					alt: "Royal Red Sofa"
				},
				{
					source: "../assets/images/Rooms/Sofa/Sofa/Sofa 2.jpg",
					alt: "Blue Comfortable Sofa"
				},
				{
					source: "../assets/images/Rooms/Sofa/Sofa/Sofa 7.jpg",
					alt: "Sandal and Brown Sofa Set"
				}
			],
			link: "./liked.html",
			heart_image: {
				source: "../assets/images/Main/heart-icon.png",
				alt: "heart-liked products"
			},
			text: "Price",
			product_description: "Description",
			heading: "Warranty",
			rate: "Ratings :",
			primary: "Add to Cart",
			secondary: "Buy Now",
			picture: {
				source: "../cart-outline.svg",
				alt: "cart icon"
			}
		}


		const section_left = document.createElement("section");
		section_left.setAttribute("class", "left");

		console.log(section_left)

		//<img/>
	    const img_product = document.createElement("img");
		img_product.setAttribute("alt", unique_id.product_name);
		img_product.setAttribute("class", "main-img");
		img_product.setAttribute("src", unique_id.image_url);
		section_left.append(img_product);


		//  <div class="down">
		const div_interiors = document.createElement("div");
		div_interiors.setAttribute("class", "down");
		section_left.append(div_interiors);


		for (let i = 0; i < 4; i++) {

			//<img/>
			const img_similar = document.createElement("img");
			img_similar.setAttribute("alt", product_upload.image[i].alt);
			img_similar.setAttribute("class", "down-img");
			img_similar.setAttribute("src", product_upload.image[i].source);
			div_interiors.append(img_similar);

		}
		document.querySelector("section.top").append(section_left);

		const section_right = document.createElement("section");
		section_right.setAttribute("class", "right");

		console.log(section_right)

		//  <h1 class="heading"> </h1>
		const h1_title = document.createElement("h1");
		h1_title.setAttribute("class", "heading");
		h1_title.innerHTML = unique_id.product_name;
		section_right.append(h1_title);

		//  <div class="heart-icon">
		const div_heart = document.createElement("div");
		div_heart.setAttribute("class", "heart-icon");
		h1_title.append(div_heart);


		//<img/>
		const img_heart = document.createElement("img");
		img_heart.setAttribute("class","liked_heart");
		img_heart.setAttribute("data-wish", unique_id.product_uuid);
		img_heart.setAttribute("alt", product_upload.heart_image.alt);
		img_heart.setAttribute("src", product_upload.heart_image.source);
		div_heart.append(img_heart);


		//  <div class="amount">
		const div_amount = document.createElement("div");
		div_amount.setAttribute("class", "amount");
		section_right.append(div_amount);


		//  <h3> </h3>
		const h3_head = document.createElement("h3");
		h3_head.innerHTML = product_upload.text;
		div_amount.append(h3_head);

		//<p class="price"></p>
		const p_paragraph = document.createElement("p");
		p_paragraph.setAttribute("class", "price");
		div_amount.append(p_paragraph);

		//<span class="real_price"></span>
		const span_price = document.createElement("span");
		span_price.setAttribute("class", "real-price");
		span_price.innerHTML ="Rs." + unique_id.product_sell;
		p_paragraph.append(span_price);


		//<del></del>
		const del_price = document.createElement("del");
		del_price.innerHTML ="Rs." + unique_id.product_real;
		p_paragraph.append(del_price);



		//  <small> </small>
		const small_pattern = document.createElement("small");
		small_pattern.setAttribute("class", "prize");
		small_pattern.innerHTML ="Rs." + unique_id.product_discount;
		p_paragraph.append(small_pattern);


		//  <div class="product-description">
		const div_description = document.createElement("div");
		div_description.setAttribute("class", "product-description");
		section_right.append(div_description);


		//  <h3> </h3>
		const h3_description = document.createElement("h3");
		h3_description.innerHTML = product_upload.product_description;
		div_description.append(h3_description);


		const p_text = document.createElement("p");
		p_text.innerHTML = unique_id.product_description;
		div_description.append(p_text);


		//  <h3> </h3>
		const h3_warranty = document.createElement("h3");
		h3_warranty.innerHTML = product_upload.heading;
		div_description.append(h3_warranty);

		//<p></p>
		const p_para = document.createElement("p");
		p_para.innerHTML = unique_id.product_warranty;
		div_description.append(p_para);


		const div_rate = document.createElement("div");
		div_rate.setAttribute("class", "rate");
		section_right.append(div_rate);

		//<p></p>
		const p_rate = document.createElement("p");
		p_rate.innerHTML = product_upload.rate;
		div_rate.append(p_rate);

		for (let k = 0; k < 5; k++) {
			//<i></i>
			i_star = document.createElement("i");
			i_star.setAttribute("class", "fa fa-star");
			p_rate.append(i_star);
		}


		//<button class="btn"></button>
		const button_primary = document.createElement("button");
		button_primary.setAttribute("class", "btn-secondary");
		button_primary.setAttribute("data-id", unique_id.product_uuid);
		button_primary.innerHTML = product_upload.primary;
		section_right.append(button_primary);

		document.querySelector("section.top").append(section_right);


		document.querySelector(".btn-secondary").addEventListener("click", function () {
			let id_cart = this.dataset.id
			let product_price = document.querySelector(".real-price").innerHTML.replace("Rs.", "");
			let cart_list = JSON.parse(localStorage.getItem('cart_list')) || [];
			let userId = JSON.parse(localStorage.getItem('user_id'));
			let exist = cart_list.length &&
				JSON.parse(localStorage.getItem('cart_list')).some(data =>
					data.product_uuid == id_cart
				);
			if (!exist) {
				cart_list.push({
					"product_uuid":id_cart,
					"product_price":parseInt(product_price),
					"userId":userId,
					"product_quantity":1
				});
				localStorage.setItem('cart_list', JSON.stringify(cart_list));
				alert('Product Added to the Cart');
				location.href = "./cart-list.html";
			}

			else {
				alert('Sorry the Product already added');
			}
		 });


		//  document.querySelector(".liked_heart").addEventListener("click", function () {

		//  })
	</script>
<script src="../assets/comments/header.js"></script>
</body>

</html>